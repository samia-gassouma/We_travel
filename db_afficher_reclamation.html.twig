{% extends 'base2.html.twig' %}
{% block title %}Booking{% endblock %}


{% block content %}

<body data-barba="wrapper">

    <div class="dashboard" data-x="dashboard" data-x-toggle="-is-sidebar-open">
        <div class="dashboard__sidebar bg-white scroll-bar-1">

            <div class="sidebar -dashboard">

                <div class="sidebar__item ">


                    <a href="{{ path('app_db_dashboard') }}"
                        class="sidebar__button d-flex items-center text-15 lh-1 fw-500">
                        <img src="{{asset('img/dashboard/sidebar/compass.svg')}}" alt="image" class="mr-15">
                        Dashboard
                    </a>


                </div>

                <div class="sidebar__item ">


                    <a href="#" class="sidebar__button d-flex items-center text-15 lh-1 fw-500">
                        <img src="{{asset('img/dashboard/sidebar/booking.svg') }}" alt="image" class="mr-15">
                        Booking Manager
                    </a>


                </div>

                <div class="sidebar__item ">


                    <div class="accordion -db-sidebar js-accordion">
                        <div class="accordion__item">
                            <div class="accordion__button">
                                <div class="sidebar__button col-12 d-flex items-center justify-between">
                                    <div class="d-flex items-center text-15 lh-1 fw-500">
                                        <img src="{{asset('img/dashboard/sidebar/hotel.svg')}}" alt="image"
                                            class="mr-10"> Manage Hotel
                                    </div>
                                    <div class="icon-chevron-sm-down text-7"></div>
                                </div>
                            </div>

                            <div class="accordion__content">
                                <ul class="list-disc pt-15 pb-5 pl-40">

                                    <li>
                                        <a href="#" class="text-15">All Hotels</a>
                                    </li>

                                    <li>
                                        <a href="#" class="text-15">Add Hotel</a>
                                    </li>

                                    <li>
                                        <a href="#" class="text-15">Recovery</a>
                                    </li>

                                </ul>
                            </div>
                        </div>
                    </div>


                </div>

                <div class="sidebar__item ">


                    <div class="accordion -db-sidebar js-accordion">
                        <div class="accordion__item">
                            <div class="accordion__button">
                                <div class="sidebar__button col-12 d-flex items-center justify-between">
                                    <div class="d-flex items-center text-15 lh-1 fw-500">
                                        <img src="{{asset('img/dashboard/sidebar/hotel.svg')}}" alt="image"
                                            class="mr-10"> Manage Hotel
                                    </div>
                                    <div class="icon-chevron-sm-down text-7"></div>
                                </div>
                            </div>

                            <div class="accordion__content">
                                <ul class="list-disc pt-15 pb-5 pl-40">

                                    <li>
                                        <a href="#" class="text-15">All Hotels</a>
                                    </li>

                                    <li>
                                        <a href="#" class="text-15">Add Hotel</a>
                                    </li>

                                    <li>
                                        <a href="#" class="text-15">Recovery</a>
                                    </li>

                                </ul>
                            </div>
                        </div>
                    </div>


                </div>

                <div class="sidebar__item ">


                    <div class="accordion -db-sidebar js-accordion">
                        <div class="accordion__item">
                            <div class="accordion__button">
                                <div class="sidebar__button col-12 d-flex items-center justify-between">
                                    <div class="d-flex items-center text-15 lh-1 fw-500">
                                        <img src="{{asset('img/dashboard/sidebar/house.svg') }}" alt="image"
                                            class="mr-10"> Manage Holiday Rental
                                    </div>
                                    <div class="icon-chevron-sm-down text-7"></div>
                                </div>
                            </div>

                            <div class="accordion__content">
                                <ul class="list-disc pt-15 pb-5 pl-40">

                                    <li>
                                        <a href="#" class="text-15">All Hotels</a>
                                    </li>

                                    <li>
                                        <a href="#" class="text-15">Add Hotel</a>
                                    </li>

                                    <li>
                                        <a href="#" class="text-15">Recovery</a>
                                    </li>

                                </ul>
                            </div>
                        </div>
                    </div>


                </div>

                <div class="sidebar__item ">


                    <div class="accordion -db-sidebar js-accordion">
                        <div class="accordion__item">
                            <div class="accordion__button">
                                <div class="sidebar__button col-12 d-flex items-center justify-between">
                                    <div class="d-flex items-center text-15 lh-1 fw-500">
                                        <img src="{{asset('img/dashboard/sidebar/sneakers.svg') }}" alt="image"
                                            class="mr-10"> Manage Event
                                    </div>
                                    <div class="icon-chevron-sm-down text-7"></div>
                                </div>
                            </div>

                            <div class="accordion__content">
                                <ul class="list-disc pt-15 pb-5 pl-40">

                                    <li>
                                        <a href="#" class="text-15">All Hotels</a>
                                    </li>

                                    <li>
                                        <a href="#" class="text-15">Add Hotel</a>
                                    </li>

                                    <li>
                                        <a href="#" class="text-15">Recovery</a>
                                    </li>

                                </ul>
                            </div>
                        </div>
                    </div>


                </div>

                <div class="sidebar__item ">


                    <div class="sidebar__item ">


                        <div class="accordion -db-sidebar js-accordion">
                            <div class="accordion__item">
                                <div class="accordion__button">

                                </div>


                            </div>
                        </div>


                    </div>


                </div>

                <div class="sidebar__item ">


                    <div class="accordion -db-sidebar js-accordion">
                        <div class="accordion__item">
                            <div class="accordion__button">
                                <div class="sidebar__button col-12 d-flex items-center justify-between">
                                    <div class="d-flex items-center text-15 lh-1 fw-500">
                                        <img src="{{asset('img/dashboard/sidebar/taxi.svg') }}" alt="image"
                                            class="mr-10"> Manage Car
                                    </div>
                                    <div class="icon-chevron-sm-down text-7"></div>
                                </div>
                            </div>

                            <div class="accordion__content">
                                <ul class="list-disc pt-15 pb-5 pl-40">

                                    <li>
                                        <a href="#" class="text-15">All Hotels</a>
                                    </li>

                                    <li>
                                        <a href="#" class="text-15">Add Hotel</a>
                                    </li>

                                    <li>
                                        <a href="#" class="text-15">Recovery</a>
                                    </li>

                                </ul>
                            </div>
                        </div>
                    </div>


                </div>

                <div class="sidebar__item ">


                    <div class="accordion -db-sidebar js-accordion">
                        <div class="accordion__item">
                            <div class="accordion__button">

                            </div>


                        </div>
                    </div>


                </div>

                <div class="sidebar__item ">


                    <div class="accordion -db-sidebar js-accordion">
                        <div class="accordion__item">
                            <div class="accordion__button">
                                <div class="sidebar__button col-12 d-flex items-center justify-between">
                                    <div class="d-flex items-center text-15 lh-1 fw-500">
                                        <img src="{{asset('img/dashboard/sidebar/airplane.svg') }}" alt="image"
                                            class="mr-10"> Manage Flights
                                    </div>
                                    <div class="icon-chevron-sm-down text-7"></div>
                                </div>
                            </div>

                            <div class="accordion__content">
                                <ul class="list-disc pt-15 pb-5 pl-40">

                                    <li>
                                        <a href="#" class="text-15">All Hotels</a>
                                    </li>

                                    <li>
                                        <a href="#" class="text-15">Add Hotel</a>
                                    </li>

                                    <li>
                                        <a href="#" class="text-15">Recovery</a>
                                    </li>

                                </ul>
                            </div>
                        </div>
                    </div>


                </div>
                <div class="sidebar__item ">


                    <div class="accordion -db-sidebar js-accordion">
                        <div class="accordion__item">
                            <div class="accordion__button">
                                <div class="sidebar__button col-12 d-flex items-center justify-between">
                                    <div class="d-flex items-center text-15 lh-1 fw-500">
                                        <img src="{{asset('img/dashboard/sidebar/airplane.svg') }}" alt="image"
                                            class="mr-10"> Gestion réclamations
                                    </div>
                                    <div class="icon-chevron-sm-down text-7"></div>
                                </div>
                            </div>

                            <div class="accordion__content">
                                <ul class="list-disc pt-15 pb-5 pl-40">

                                    <li>
                                        <a href="{{path('app_afficher_reclamation')}}" class="text-15">Afficher
                                            réclamations</a>
                                    </li>

                                    <li>
                                        <a href="#" class="text-15">Add Hotel</a>
                                    </li>

                                    <li>
                                        <a href="#" class="text-15">Recovery</a>
                                    </li>

                                </ul>
                            </div>
                        </div>
                    </div>


                </div>

                <div class="sidebar__item ">


                    <div class="accordion -db-sidebar js-accordion">
                        <div class="accordion__item">
                            <div class="accordion__button">
                                <div class="sidebar__button col-12 d-flex items-center justify-between">
                                    <div class="d-flex items-center text-15 lh-1 fw-500">
                                        <img src="{{asset('img/dashboard/sidebar/airplane.svg') }}" alt="image"
                                            class="mr-10"> Gestion réponses
                                    </div>
                                    <div class="icon-chevron-sm-down text-7"></div>
                                </div>
                            </div>

                            <div class="accordion__content">
                                <ul class="list-disc pt-15 pb-5 pl-40">

                                    <li>
                                        <a href="{{path('app_afficher_reponse')}}" class="text-15">Afficher réponses</a>
                                    </li>

                                    <li>
                                        <a href="{{path('app_ajouter_reponse',{'id': '60'})}}" class="text-15">Ajouter
                                            réponse</a>
                                    </li>

                                    <li>
                                        <a href="#" class="text-15">Recovery</a>
                                    </li>

                                </ul>
                            </div>
                        </div>
                    </div>


                </div>

                <div class="sidebar__item ">


                    <a href="#" class="sidebar__button d-flex items-center text-15 lh-1 fw-500">
                        <img src="{{asset('img/dashboard/sidebar/log-out.svg') }}" alt="image" class="mr-15">
                        Logout
                    </a>


                </div>

            </div>

        </div>

        <div class="dashboard__main">
            <div class="dashboard__content bg-light-2">
                <div class="row y-gap-20 justify-between items-end pb-60 lg:pb-40 md:pb-32">
                    <div class="col-auto">

                        <h1 class="text-30 lh-14 fw-600">Booking History</h1>
                        <div class="text-15 text-light-1">Lorem ipsum dolor sit amet, consectetur.</div>

                    </div>

                    <div class="col-auto">

                    </div>
                </div>


                <div class="py-30 px-30 rounded-4 bg-white shadow-3">
                    <div class="tabs -underline-2 js-tabs">
                        <div class="tabs__controls row x-gap-40 y-gap-10 lg:x-gap-20 js-tabs-controls">

                            <div class="col-auto">
                                <button
                                    class="tabs__button text-18 lg:text-16 text-light-1 fw-500 pb-5 lg:pb-0 js-tabs-button is-tab-el-active"
                                    data-tab-target=".-tab-item-1">All Booking</button>
                            </div>

                            <div class="col-auto">
                                <button
                                    class="tabs__button text-18 lg:text-16 text-light-1 fw-500 pb-5 lg:pb-0 js-tabs-button "
                                    data-tab-target=".-tab-item-2">Completed</button>
                            </div>

                            <div class="col-auto">
                                <button
                                    class="tabs__button text-18 lg:text-16 text-light-1 fw-500 pb-5 lg:pb-0 js-tabs-button "
                                    data-tab-target=".-tab-item-3">Processing</button>
                            </div>

                            <div class="col-auto">
                                <button
                                    class="tabs__button text-18 lg:text-16 text-light-1 fw-500 pb-5 lg:pb-0 js-tabs-button "
                                    data-tab-target=".-tab-item-4">Confirmed</button>
                            </div>

                            <div class="col-auto">
                                <button
                                    class="tabs__button text-18 lg:text-16 text-light-1 fw-500 pb-5 lg:pb-0 js-tabs-button "
                                    data-tab-target=".-tab-item-5">Cancelled</button>
                            </div>

                            <div class="col-auto">
                                <button
                                    class="tabs__button text-18 lg:text-16 text-light-1 fw-500 pb-5 lg:pb-0 js-tabs-button "
                                    data-tab-target=".-tab-item-6">Paid</button>
                            </div>

                            <div class="col-auto">
                                <button
                                    class="tabs__button text-18 lg:text-16 text-light-1 fw-500 pb-5 lg:pb-0 js-tabs-button "
                                    data-tab-target=".-tab-item-7">Unpaid</button>
                            </div>

                            <div class="col-auto">
                                <button
                                    class="tabs__button text-18 lg:text-16 text-light-1 fw-500 pb-5 lg:pb-0 js-tabs-button "
                                    data-tab-target=".-tab-item-8">Partial Payment</button>
                            </div>

                        </div>

                        <div class="tabs__content pt-30 js-tabs-content">

                            <div class="tabs__pane -tab-item-1 is-tab-el-active">
                                <div class="overflow-scroll scroll-bar-1">
                                    <table class="table-3 -border-bottom col-12">
                                        <thead class="bg-light-2">
                                            <tr>
                                                <th>Id</th>
                                                <th>client_id</th>
                                                <th>Date</th>
                                                <th>Date_envoi</th>
                                                <th>Type</th>
                                                <th>reservation_id</th>
                                                <th>paiement_id</th>
                                                <th>Description</th>
                                                <th>Statut</th>
                                                <th>Action</th>
                                            </tr>
                                        </thead>
                                        <tbody>

                                            {% for r in list %}

                                            <tr class=" {% if r.statut == 'en attente' %}bold-row{% endif %}"
                                                data-message-id="{{ r.id }}" data-status="{{ r.statut }}">
                                                <td>{{ r.id }} </td>
                                                <td>{{ r.client.id }} </td>
                                                <td>{{ r.date | date('d,F,Y') }} </td>
                                                <td>{{ r.date_envoi | date('d,F,Y') }} </td>
                                                <td>{{ r.type }} </td>
                                                <td>{{ r.reservation }} </td>
                                                <td>{{ r.paiement }} </td>
                                                <td>{{ r.description }} </td>
                                                <td> {% if ( r.Statut == 'en attente') %}
                                                    <span style="white-space: nowrap;"
                                                        class="rounded-100 py-4 px-10 text-center text-14 fw-500 no-wrap bg-yellow-4 text-yellow-3">{{
                                                        r.Statut }} </span>
                                                    {% elseif ( r.Statut == "en cours") %}
                                                    <span
                                                        class="rounded-100 py-4 px-10 text-center text-14 fw-500 no-wrap bg-blue-1-05 text-blue-1">{{
                                                        r.Statut }}</span>
                                                    {% elseif ( r.Statut == "résolu") %}
                                                    <span
                                                        class="rounded-100 py-4 px-10 text-center text-14 fw-500 no-wrap bg-green-1 text-green-2">{{
                                                        r.Statut }}</span>

                                                    {% endif %}
                                                </td>
                                                <td>
                                                    {% if(r.statut =='résolu') %}
                                                    <button style="white-space: nowrap;"
                                                        onclick="window.location.href='{{path('app_voir_reponse',{'id_r':r.id})}}';"
                                                        class="button -md -blue-1 bg-blue-1-05 text-blue-1">Voir
                                                        réponse</button>
                                                    {% endif %}

                                                    <button
                                                        onclick="window.location.href='{{path('app_ajouter_reponse',{'id': r.id})}}';"
                                                        class="button -md -blue-1 bg-blue-1-05 text-blue-1 ">Répondre</button>

                                                </td>

                                            </tr>
                                            {% endfor %}
                                        </tbody>
                                    </table>
                                </div>
                            </div>

                            {# missing here #}

                        </div>
                    </div>

                    <div class="pt-30">
                        <div class="row justify-between">
                            <div class="col-auto">
                                <button class="button -blue-1 size-40 rounded-full border-light">
                                    <i class="icon-chevron-left text-12"></i>
                                </button>
                            </div>

                            <div class="col-auto">
                                <div class="row x-gap-20 y-gap-20 items-center">

                                    <div class="col-auto">

                                        <div class="size-40 flex-center rounded-full">1</div>

                                    </div>

                                    <div class="col-auto">

                                        <div class="size-40 flex-center rounded-full bg-dark-1 text-white">2</div>

                                    </div>

                                    <div class="col-auto">

                                        <div class="size-40 flex-center rounded-full">3</div>

                                    </div>

                                    <div class="col-auto">

                                        <div class="size-40 flex-center rounded-full bg-light-2">4</div>

                                    </div>

                                    <div class="col-auto">

                                        <div class="size-40 flex-center rounded-full">5</div>

                                    </div>

                                    <div class="col-auto">

                                        <div class="size-40 flex-center rounded-full">...</div>

                                    </div>

                                    <div class="col-auto">

                                        <div class="size-40 flex-center rounded-full">20</div>

                                    </div>

                                </div>
                            </div>

                            <div class="col-auto">
                                <button class="button -blue-1 size-40 rounded-full border-light">
                                    <i class="icon-chevron-right text-12"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

</body>

<script>
    // Add a click event listener to each table row
    document.addEventListener('DOMContentLoaded', function () {
        var rows = document.querySelectorAll('.bold-row');

        rows.forEach(function (row) {
            row.addEventListener('click', function () {
                // Toggle the 'bold-row' class on the clicked row
                row.classList.remove('bold-row');
                row.classList.add('message-row');
                var messageId = row.getAttribute('data-message-id');


                // Send the clicked variable to Twig
                window.location.href = '{{ path('app_ajouter_reponse', {'id': '___MESSAGE_ID___'}) }}'
                    .replace('___MESSAGE_ID___', encodeURIComponent(messageId));
            });
        });
    });
</script>
{% endblock %}